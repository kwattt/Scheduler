(this["webpackJsonphorario-kv"]=this["webpackJsonphorario-kv"]||[]).push([[0],{46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},53:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),i=c(20),a=c.n(i),s=c(4),o=c(7),j=c.n(o),l=c(2),d=c(21),b=c(3),u=c(9),O=c.n(u),h=c(0),f={setOpciones:function(e){},opciones:[],setSelected:function(e){},selected:{}},x=Object(n.createContext)(f),v=function(e){var t=e.children,c=Object(n.useState)({opciones:f.opciones,selected:f.selected}),r=Object(b.a)(c,2),i=r[0],a=r[1],s=i.opciones,o=i.selected;return Object(h.jsx)(x.Provider,{value:{setOpciones:function(e){a((function(t){return Object(l.a)(Object(l.a)({},t),{},{opciones:e})}))},setSelected:function(e){a((function(t){return Object(l.a)(Object(l.a)({},t),{},{selected:e})}))},opciones:s,selected:o},children:t})},p={setHorario:function(e){},horario:{centros:[],materias:[],ciclos:[]},nrcInfo:{}},m=Object(n.createContext)(p),g=function(e){var t=e.children,c=Object(n.useState)(p.horario),r=Object(b.a)(c,2),i=r[0],a=r[1],o=Object(n.useState)({}),u=Object(b.a)(o,2),f=u[0],v=u[1],g=Object(n.useContext)(x).setSelected;Object(n.useEffect)((function(){var e=!0;return function(){var t=Object(d.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:O.a.get("https://scheduler.kv-at.com/getInfo").then((function(e){a((function(t){return Object(l.a)(Object(l.a)({},t),{},{centros:e.data.planteles,ciclos:e.data.ciclos})}))})).catch((function(e){console.log(e)})).catch((function(t){e&&console.log(t)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}}),[]);return Object(h.jsx)(m.Provider,{value:{setHorario:function(e){a(e);var t={};if(e.materias.length>0){var c,n=Object(s.a)(e.materias);try{for(n.s();!(c=n.n()).done;){var r,i=c.value,o=Math.floor(16777215*Math.random()).toString(16),j=Object(s.a)(i.secciones);try{for(j.s();!(r=j.n()).done;){var l=r.value;t[l.nrc]={clave:l.clave,nombre:l.nombre,profesor:l.profesor,color:"#"+o}}}catch(d){j.e(d)}finally{j.f()}}}catch(d){n.e(d)}finally{n.f()}g(void 0),v(t)}},horario:i,nrcInfo:f},children:t})},C=function(e){var t=e.config,c=e.setConfig;return Object(h.jsxs)("div",{id:"opciones",children:[Object(h.jsx)("h4",{children:"Opciones"}),Object(h.jsxs)("div",{className:"opciones-config",children:[Object(h.jsx)("label",{children:"Max Horarios"}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{onChange:function(e){c(Object(l.a)(Object(l.a)({},t),{},{maxHorarios:parseInt(e.target.value)}))},type:"number",value:t.maxHorarios})]}),Object(h.jsxs)("div",{className:"opciones-config",children:[Object(h.jsx)("label",{children:"Max Iteraciones"}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{onChange:function(e){c(Object(l.a)(Object(l.a)({},t),{},{maxIterations:parseInt(e.target.value)}))},type:"number",value:t.maxIterations})]}),Object(h.jsxs)("div",{className:"opciones-config",children:[Object(h.jsx)("label",{children:"Horas muertas"}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{onChange:function(e){c(Object(l.a)(Object(l.a)({},t),{},{maxDist:parseInt(e.target.value)}))},type:"number",value:t.maxDist})]}),Object(h.jsxs)("div",{className:"opciones-config",children:[Object(h.jsx)("label",{children:"Con cupo"}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{children:t.conCupo?"SI":"NO",value:+t.conCupo,onClick:function(){c(Object(l.a)(Object(l.a)({},t),{},{conCupo:!t.conCupo}))}})]})]})},y=c(10),k=j.a.mark(S);function S(e){var t,c,n,r,i,a,o,l,d,b,u=arguments;return j.a.wrap((function(j){for(;;)switch(j.prev=j.next){case 0:for(t=u.length,c=new Array(t>1?t-1:0),n=1;n<t;n++)c[n-1]=u[n];r=c.length?S.apply(void 0,c):[[]],i=Object(s.a)(r),j.prev=3,i.s();case 5:if((a=i.n()).done){j.next=26;break}o=a.value,l=Object(s.a)(e),j.prev=8,l.s();case 10:if((d=l.n()).done){j.next=16;break}return b=d.value,j.next=14,[b].concat(Object(y.a)(o));case 14:j.next=10;break;case 16:j.next=21;break;case 18:j.prev=18,j.t0=j.catch(8),l.e(j.t0);case 21:return j.prev=21,l.f(),j.finish(21);case 24:j.next=5;break;case 26:j.next=31;break;case 28:j.prev=28,j.t1=j.catch(3),i.e(j.t1);case 31:return j.prev=31,i.f(),j.finish(31);case 34:case"end":return j.stop()}}),k,null,[[3,28,31,34],[8,18,21,24]])}c(46);var N=function(){var e=Object(n.useContext)(m).horario,t=Object(n.useContext)(x),c=t.setOpciones,r=t.setSelected,i=Object(n.useState)({maxHorarios:100,conCupo:!1,maxIterations:1e6,maxDist:2}),a=Object(b.a)(i,2),o=a[0],j=a[1];return Object(h.jsxs)("div",{id:"generador",children:[Object(h.jsx)(C,{config:o,setConfig:j}),Object(h.jsx)("button",{children:"Generar",onClick:function(){!function(){c([]),r(void 0);var t,n=[],i=0,a=e.materias.filter((function(e){return!0===e.activo})),j=a.map((function(e){return e.clave})),l=[],d=Object(s.a)(a);try{for(d.s();!(t=d.n()).done;){var b=t.value;o.conCupo?l.push(b.secciones.filter((function(e){return!0===e.activo&&e.disponibles>0}))):l.push(b.secciones.filter((function(e){return!0===e.activo})))}}catch(U){d.e(U)}finally{d.f()}if(0===e.materias.length)return c([]),void r(void 0);var u,O=[],h=Object(s.a)(S.apply(void 0,l));try{for(h.s();!(u=h.n()).done;){var f=u.value;if(i++,O.push(f),i===o.maxIterations)break}}catch(U){h.e(U)}finally{h.f()}for(var x=0,v=0,p=O;v<p.length;v++){var m,g=p[v],C={},y=[],k=Object(s.a)(g);try{for(k.s();!(m=k.n()).done;){var N=m.value;if(!y.includes(N.clave)){var I,H=Object(s.a)(N.horas);try{for(H.s();!(I=H.n()).done;){var w,M=I.value,D=!0,P=Object(s.a)(M.dias);try{for(P.s();!(w=P.n()).done;){var _=w.value;C.hasOwnProperty(_)||(C[_]={});for(var A=M.entrada;A<M.salida;A++)C[_].hasOwnProperty(A)&&(D=!1)}}catch(U){P.e(U)}finally{P.f()}if(D){var B,E=Object(s.a)(M.dias);try{for(E.s();!(B=E.n()).done;)for(var G=B.value,J=M.entrada;J<M.salida;J++)C[G].hasOwnProperty(J)||(C[G][J]=N.nrc,y.includes(N.clave)||y.push(N.clave))}catch(U){E.e(U)}finally{E.f()}}}}catch(U){H.e(U)}finally{H.f()}}}}catch(U){k.e(U)}finally{k.f()}var R,F=!0,L=Object(s.a)(j);try{for(L.s();!(R=L.n()).done;){var q=R.value;if(!y.includes(q)){F=!1;break}}}catch(U){L.e(U)}finally{L.f()}var z=!0;if(F&&o.maxDist>0)for(var T in C){if(!z)break;var V=!0,K=0;for(var Q in C[T])if(V)K=parseInt(Q),V=!1;else{if(parseInt(Q)-K>o.maxDist){z=!1;break}K=parseInt(Q)}}if(z&&F&&(n.push(C),++x>=o.maxHorarios))break}c(n),n.length>0&&r(n[0])}()}})]})},I=function(e){var t=e.materia,c=e.index,r=Object(n.useState)(!0),i=Object(b.a)(r,2),a=i[0],s=i[1],o=Object(n.useContext)(m),j=o.horario,d=o.setHorario;return Object(h.jsxs)("div",{className:"materia-info",children:[Object(h.jsx)("h3",{onClick:function(){s(!a)},children:t.nombre}),!0===t.activo&&a&&Object(h.jsx)("div",{className:"materia-table-container",children:Object(h.jsxs)("table",{className:"NRCS",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"NRC"}),Object(h.jsx)("td",{children:"Seccion"}),Object(h.jsx)("td",{children:"Maestr@"}),Object(h.jsx)("td",{children:"Horario"}),Object(h.jsx)("td",{children:"Cupos"}),Object(h.jsx)("td",{children:"Cupo disp."}),Object(h.jsx)("td",{children:"Creditos"}),Object(h.jsx)("td",{children:"Buscar"})]})}),Object(h.jsx)("tbody",{children:t.secciones.map((function(e,t){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.nrc}),Object(h.jsx)("td",{children:e.seccion}),Object(h.jsx)("td",{children:e.profesor}),Object(h.jsx)("td",{className:"seccion-horario",children:Object(h.jsx)("table",{children:Object(h.jsx)("tbody",{children:e.horas.map((function(e,t){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.dias.join(", ")}),Object(h.jsx)("td",{children:e.entrada}),Object(h.jsx)("td",{children:e.salida})]},"nrch-"+t)}))})})}),Object(h.jsx)("td",{children:e.cupos}),Object(h.jsx)("td",{children:e.disponibles}),Object(h.jsx)("td",{children:e.creditos}),Object(h.jsx)("td",{className:e.activo?"btn-active":"btn-inactive",children:Object(h.jsx)("input",{className:"sect-activo",type:"checkbox",defaultChecked:e.activo,value:+e.activo,onChange:function(){!function(e){var t=j.materias;t[c].secciones[e].activo=!t[c].secciones[e].activo,d(Object(l.a)(Object(l.a)({},j),{},{materias:t}))}(t)}})})]},"sect"+e.nrc)}))})]})})]})},H=(c(47),function(){var e=Object(n.useContext)(m).horario;return Object(h.jsx)("div",{id:"materias-contenedor",children:e.materias.map((function(e,t){return Object(h.jsx)("div",{children:Object(h.jsx)(I,{materia:e,index:t})},"mat"+t.toString())}))})}),w=function(){var e=Object(n.useContext)(m),t=e.setHorario,c=e.horario,r=Object(n.useState)([]),i=Object(b.a)(r,2),a=i[0],s=i[1],o=Object(n.useContext)(x),j=o.setSelected,d=o.setOpciones,u=Object(n.useState)(""),f=Object(b.a)(u,2),v=f[0],p=f[1];return Object(h.jsxs)("div",{id:"selector-materias",children:[Object(h.jsx)("label",{children:Object(h.jsx)("b",{children:"Nueva materia"})}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{className:"materia-input",type:"text",placeholder:"Clave de la materia",maxLength:10,value:v,onChange:function(e){p(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{children:"A\xf1adir",onClick:function(){s([].concat(Object(y.a)(a),[v])),p("")}}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{id:"materias-container",children:a.map((function(e,t){return Object(h.jsxs)("div",{className:"materia-search",children:[Object(h.jsx)("button",{children:e,disabled:!0}),Object(h.jsx)("button",{children:"x",onClick:function(){s(a.filter((function(t){return t!==e})))}})]},t)}))}),Object(h.jsx)("div",{id:"query-materias",children:Object(h.jsx)("button",{onClick:function(){"undefined"!==typeof c.centro&&"undefined"!==typeof c.ciclo&&0!==a.length&&(p(""),j(void 0),d([]),O.a.post("https://scheduler.kv-at.com/getData",{info:{materias:a,centro:c.centro.id,ciclo:c.ciclo.id}}).then((function(e){t(Object(l.a)(Object(l.a)({},c),{},{materias:e.data}))})).catch((function(e){console.log(e)})))},children:"Buscar"})})]})},M=(c(48),function(){var e=Object(n.useContext)(m),t=e.setHorario,c=e.horario;return Object(h.jsxs)("div",{id:"selector-mat",children:[Object(h.jsxs)("div",{id:"selector-centros",children:[Object(h.jsx)("label",{children:Object(h.jsx)("b",{children:"Centros"})}),Object(h.jsx)("br",{}),Object(h.jsxs)("select",{onChange:function(e){!function(e){var n=void 0;-1!==e&&"undefined"!==typeof e&&(n=c.centros[e]),t(Object(l.a)(Object(l.a)({},c),{},{centro:n}))}(parseInt(e.target.value))},children:[Object(h.jsx)("option",{value:-1,children:"Seleccionar"}),c.centros.map((function(e,t){return Object(h.jsx)("option",{value:t,children:e.nombre},e.id)}))]})]}),Object(h.jsxs)("div",{id:"selector-ciclos",children:[Object(h.jsx)("label",{children:Object(h.jsx)("b",{children:"Ciclos"})}),Object(h.jsx)("br",{}),Object(h.jsxs)("select",{onChange:function(e){!function(e){var n=void 0;-1!==e&&"undefined"!==typeof e&&(n=c.ciclos[e]),t(Object(l.a)(Object(l.a)({},c),{},{ciclo:n}))}(parseInt(e.target.value))},children:[Object(h.jsx)("option",{value:-1,children:"Seleccionar"}),c.ciclos.map((function(e,t){return Object(h.jsx)("option",{value:t,children:e.nombre},e.id)}))]})]}),Object(h.jsx)(w,{})]})}),D=(c(49),function(){var e=Object(n.useContext)(x),t=e.opciones,c=e.setSelected,r=e.selected,i=Object(n.useState)(0),a=Object(b.a)(i,2),s=a[0],o=a[1];Object(n.useEffect)((function(){t.length>0&&r!==t[s]&&c(t[s])}),[s,t,c,r]);var j=function(e){s+e<0?o(t.length-1):s+e===t.length?o(0):o(s+e)};return Object(h.jsxs)("div",{id:"selector-outer",style:{visibility:t.length>0?"visible":"hidden"},children:[Object(h.jsx)("label",{children:Object(h.jsx)("b",{children:"Generados"})}),Object(h.jsx)("br",{}),Object(h.jsxs)("div",{id:"selector",children:[Object(h.jsx)("button",{className:"btn-move",onClick:function(){j(-1)},children:"<"}),Object(h.jsx)("ul",{children:t.map((function(e,t){return Object(h.jsxs)("li",{children:[Object(h.jsx)("input",{type:"radio",value:t,name:"select",id:"sel_"+t,checked:s===t,onChange:function(e){var t;t=parseInt(e.target.value),o(t)}},"sopt"+t),Object(h.jsx)("label",{htmlFor:"sel_"+t,children:t+1})]},"stid"+t)}))}),Object(h.jsx)("button",{className:"btn-move",onClick:function(){j(1)},children:">"})]})]})}),P=(c(50),function(){var e=Object(n.useContext)(x).selected,t=Object(n.useContext)(m).nrcInfo,c=Object(n.useState)(!1),r=Object(b.a)(c,2),i=r[0],a=r[1],s=[],o={Horas:{},Lunes:{},Martes:{},Miercoles:{},Jueves:{},Viernes:{},Sabado:{}};return function(){for(var t in o)for(var c=5;c<=23;c++)o[t][c]="_";if("undefined"!==typeof e)for(var n in e)for(var r in e[n])o[n][r]=e[n][r],s.includes(e[n][r])||s.push(e[n][r])}(),Object(h.jsxs)("div",{id:"grid-info",children:[Object(h.jsx)(D,{}),Object(h.jsx)("div",{id:"grid",children:Object.keys(o).map((function(e){return Object(h.jsxs)("div",{className:"grid-day",children:[e,Object(h.jsx)("div",{className:"grid-day-content",children:"Horas"!==e?Object.keys(o[e]).map((function(c,n){return"_"===o[e][c]?Object(h.jsx)("div",{children:"-"},"hour"+n):Object(h.jsx)("div",{style:{backgroundColor:t[o[e][c]].color+"A0"},children:!1===i?o[e][c]:t[o[e][c]].nombre.split(" ").map((function(e){return e[0]}))},"hour"+n)})):Object.keys(o[e]).map((function(e){return Object(h.jsxs)("div",{children:[e,":00"]},"time"+e)}))})]},"gridv"+e)}))}),"undefined"!==e&&Object(h.jsxs)("div",{id:"changeType",children:[Object(h.jsx)("div",{children:s.map((function(e){return Object(h.jsxs)("div",{className:"nrc-info",style:{backgroundColor:t[e].color+"65"},children:[Object(h.jsx)("b",{children:e})," ",t[e].nombre," ",t[e].profesor]},"info"+e)}))}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"Mostrar: "}),Object(h.jsx)("button",{children:i?"Iniciales":"NRC",onClick:function(){a(!i)}})]})]})]})}),_=(c(51),c(52),c.p+"static/media/github-icon.04ed74f3.svg"),A=function(){return Object(h.jsxs)("div",{id:"main",children:[Object(h.jsx)("div",{id:"nav",children:Object(h.jsx)("h1",{children:"Scheduler"})}),Object(h.jsxs)("div",{id:"content",children:[Object(h.jsx)(M,{}),Object(h.jsx)(H,{}),Object(h.jsx)(N,{}),Object(h.jsx)(P,{})]}),Object(h.jsx)("div",{id:"footer",children:Object(h.jsxs)("p",{children:["Source code ",Object(h.jsxs)("a",{href:"https://github.com/kwattt/Scheduler",children:[Object(h.jsx)("img",{alt:"github markz",src:_,height:"20px"}),"Github"]})]})})]})},B=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(g,{children:Object(h.jsx)(v,{children:Object(h.jsx)(A,{})})})})};a.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(B,{})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.088e1134.chunk.js.map